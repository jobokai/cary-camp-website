// CTA Button Styles - Fully Accessible BSA Themed
@use 'sass:color';
@use '../base/variables' as *;
@use '../base/spacing' as *;
@use '../base/typography' as *;

.cta-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: $space-2;
  padding: $space-3 $space-6;
  font-family: $font-secondary;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  text-decoration: none;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  border-radius: $radius-md;
  border: 2px solid;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  min-height: 44px; // WCAG AA minimum touch target
  min-width: 44px;
  line-height: 1.2;
  text-align: center;
  position: relative;
  overflow: hidden;
  width: fit-content;
  flex-shrink: 0;
  
  // Focus styles for accessibility
  &:focus {
    outline: 3px solid $scouting-tan;
    outline-offset: 2px;
    box-shadow: 0 0 0 2px $white, 0 0 0 5px $scouting-tan;
  }
  
  // Remove focus outline when using mouse/touch
  &:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }
  
  // Ensure focus is visible for keyboard users
  &:focus-visible {
    outline: 3px solid $scouting-tan;
    outline-offset: 2px;
  }
  
  // Disabled state
  &:disabled,
  &[aria-disabled="true"] {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
  
  // High contrast mode support
  @media (prefers-contrast: high) {
    border-width: 3px;
  }
  
  // Reduced motion support
  @media (prefers-reduced-motion: reduce) {
    transition: none;
    
    &:hover {
      transform: none;
    }
  }
  
  // Size variants
  &--small {
    padding: $space-2 $space-4;
    font-size: $font-size-sm;
    min-height: 36px;
  }
  
  &--large {
    padding: $space-6 $space-8;
    font-size: $font-size-lg;
    min-height: 52px;
  }
  
  // Style variants
  &--primary {
    background-color: $scouting-red;
    border-color: $scouting-red;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: transparent;
      border-color: $scouting-red;
      color: $scouting-red;
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  &--secondary {
    background-color: $scouting-dark-blue;
    border-color: $scouting-dark-blue;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: $scouting-red;
      border-color: $scouting-red;
      color: $white;
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  &--danger {
    background-color: $scouting-red;
    border-color: $scouting-red;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: color.scale($scouting-red, $lightness: -10%);
      border-color: color.scale($scouting-red, $lightness: -10%);
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  &--success {
    background-color: $venturing-green;
    border-color: $venturing-green;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: color.scale($venturing-green, $lightness: -10%);
      border-color: color.scale($venturing-green, $lightness: -10%);
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  &--outline {
    background-color: transparent;
    border-color: $scouting-warm-gray;
    color: $scouting-dark-gray;
    
    &:hover:not(:disabled) {
      background-color: $scouting-warm-gray;
      color: $white;
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  // Document/form specific styles
  &--download {
    background-color: $scouting-red;
    border-color: $scouting-red;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: transparent;
      border-color: $scouting-red;
      color: $scouting-red;
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  &--external {
    background-color: $scouting-pale-blue;
    border-color: $scouting-pale-blue;
    color: $scouting-dark-blue;
    
    &:hover:not(:disabled) {
      background-color: color.scale($scouting-pale-blue, $lightness: -20%);
      border-color: color.scale($scouting-pale-blue, $lightness: -20%);
      box-shadow: $shadow-md;
    }
    
    &:active {
      box-shadow: $shadow-sm;
    }
  }
  
  // Additional icon-specific variants
  &--info {
    background-color: $scouting-blue;
    border-color: $scouting-blue;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: $scouting-dark-blue;
      border-color: $scouting-dark-blue;
      box-shadow: $shadow-md;
    }
  }
  
  &--contact {
    background-color: $venturing-green;
    border-color: $venturing-green;
    color: $white;
    
    &:hover:not(:disabled) {
      background-color: color.scale($venturing-green, $lightness: -10%);
      border-color: color.scale($venturing-green, $lightness: -10%);
      box-shadow: $shadow-md;
    }
  }
  
  // Icon support
  .cta-button__icon {
    flex-shrink: 0;
    font-size: 1.1em;
    line-height: 1;
    
    &--left {
      margin-right: $space-2;
    }
    
    &--right {
      margin-left: $space-2;
    }
  }
  
  // Specific icon styles for button variants
  &--download .cta-button__icon {
    color: inherit;
  }
  
  &--external .cta-button__icon {
    color: inherit;
    font-size: 0.9em;
  }
  
  // Loading state
  &--loading {
    pointer-events: none;
    
    &::after {
      content: "";
      position: absolute;
      width: 16px;
      height: 16px;
      margin: auto;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: button-loading-spinner 1s ease infinite;
    }
    
    .cta-button__text {
      visibility: hidden;
    }
  }
}

// Button group for multiple CTAs
.cta-button-group {
  display: flex;
  flex-wrap: wrap;
  gap: $space-4;
  align-items: center;
  
  &--center {
    justify-content: center;
  }
  
  &--right {
    justify-content: flex-end;
  }
  
  &--stack {
    flex-direction: column;
    align-items: stretch;
    
    .cta-button {
      width: 100%;
    }
  }
  
  @media (max-width: $breakpoint-sm) {
    flex-direction: column;
    
    .cta-button {
      width: 100%;
    }
  }
}

// Animations
@keyframes button-loading-spinner {
  to {
    transform: rotate(360deg);
  }
}

// Screen reader only text
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}